describe('Kickass torrent search', function () {

  var KickassTorrentProvider = require('../lib/diyvod/torrentProvider/kickassTorrentProvider');

  it('maps kickass torrents json', function () {

    var search = new KickassTorrentProvider(null, null);

    var results = search.mapResults(JSON.parse(getSampleJson()));

    expect(results).toBeDefined();
    expect(results.length).toBeGreaterThan(0);

    var entry = results[0];

    expect(entry).toBeDefined();
    expect(entry.seeds).toBeDefined();
    expect(entry.leechs).toBeDefined();
    expect(entry.size).toBeDefined();
    expect(entry.name).toBeDefined();
    expect(entry.createdAt).toBeDefined();
    expect(entry.torrentLink).toBeDefined();
  });

  function getSampleJson() {
    return '{"title":"Kickasstorrents ubuntu","link":"http:\/\/kickass.so","description":"BitTorrent Search: ubuntu","language":"en-us","ttl":60,"total_results":"1488","list":[{"title":"Ubuntu 12.04.4 alternate (64-bit)","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-12-04-4-alternate-64-bit-t8799906.html","guid":"http:\/\/kickass.so\/ubuntu-12-04-4-alternate-64-bit-t8799906.html","pubDate":"Saturday 22 Feb 2014 10:48:10 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/0F9A3B48EBEBE8448B83ECA6B86B1CF1B08926DD.torrent?title=[kickass.so]ubuntu.12.04.4.alternate.64.bit","files":1,"comments":1,"hash":"0F9A3B48EBEBE8448B83ECA6B86B1CF1B08926DD","peers":289,"seeds":283,"leechs":6,"size":780140544,"votes":4,"verified":0},{"title":"Ubuntu 14.10 Desktop 64bit ISO","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-14-10-desktop-64bit-iso-t9749691.html","guid":"http:\/\/kickass.so\/ubuntu-14-10-desktop-64bit-iso-t9749691.html","pubDate":"Thursday 23 Oct 2014 17:33:00 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/B415C913643E5FF49FE37D304BBB5E6E11AD5101.torrent?title=[kickass.so]ubuntu.14.10.desktop.64bit.iso","files":1,"comments":7,"hash":"B415C913643E5FF49FE37D304BBB5E6E11AD5101","peers":150,"seeds":132,"leechs":18,"size":1162936320,"votes":19,"verified":1},{"title":"ubuntu 13.10 server amd64.iso","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-13-10-server-amd64-iso-t8031238.html","guid":"http:\/\/kickass.so\/ubuntu-13-10-server-amd64-iso-t8031238.html","pubDate":"Friday 18 Oct 2013 00:56:25 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/6A36DE201DF2F1B2C817474C3075FF0EAA8C7785.torrent?title=[kickass.so]ubuntu.13.10.server.amd64.iso","files":1,"comments":5,"hash":"6A36DE201DF2F1B2C817474C3075FF0EAA8C7785","peers":116,"seeds":109,"leechs":7,"size":704643072,"votes":33,"verified":0},{"title":"Ubuntu 14.04 LTS Trusty Tahr desktop 32bit ISO","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-14-04-lts-trusty-tahr-desktop-32bit-iso-t9007070.html","guid":"http:\/\/kickass.so\/ubuntu-14-04-lts-trusty-tahr-desktop-32bit-iso-t9007070.html","pubDate":"Thursday 17 Apr 2014 18:22:07 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/7A1073BC39E6B0B01E3730227B8FFEA6AEAC5D59.torrent?title=[kickass.so]ubuntu.14.04.lts.trusty.tahr.desktop.32bit.iso","files":1,"comments":19,"hash":"7A1073BC39E6B0B01E3730227B8FFEA6AEAC5D59","peers":95,"seeds":90,"leechs":5,"size":1017118720,"votes":71,"verified":0},{"title":"Ubuntu 14.04 LTS Desktop 64bit ISO","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-14-04-lts-desktop-64bit-iso-t9007063.html","guid":"http:\/\/kickass.so\/ubuntu-14-04-lts-desktop-64bit-iso-t9007063.html","pubDate":"Thursday 17 Apr 2014 18:19:30 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/4D753474429D817B80FF9E0C441CA660EC5D2450.torrent?title=[kickass.so]ubuntu.14.04.lts.desktop.64bit.iso","files":1,"comments":72,"hash":"4D753474429D817B80FF9E0C441CA660EC5D2450","peers":90,"seeds":86,"leechs":4,"size":1010827264,"votes":99,"verified":0},{"title":"ubuntu 14 04 1 desktop amd64 iso","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-14-04-1-desktop-amd64-iso-t9376607.html","guid":"http:\/\/kickass.so\/ubuntu-14-04-1-desktop-amd64-iso-t9376607.html","pubDate":"Friday 25 Jul 2014 14:51:30 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/CB84CCC10F296DF72D6C40BA7A07C178A4323A14.torrent?title=[kickass.so]ubuntu.14.04.1.desktop.amd64.iso","files":1,"comments":44,"hash":"CB84CCC10F296DF72D6C40BA7A07C178A4323A14","peers":94,"seeds":84,"leechs":10,"size":1028653056,"votes":126,"verified":1},{"title":"ubuntu 14 04 1 desktop i386 iso","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-14-04-1-desktop-i386-iso-t9376609.html","guid":"http:\/\/kickass.so\/ubuntu-14-04-1-desktop-i386-iso-t9376609.html","pubDate":"Friday 25 Jul 2014 14:51:47 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/DDEF9436D7F45C210A9455CB53E3BEE605733A20.torrent?title=[kickass.so]ubuntu.14.04.1.desktop.i386.iso","files":1,"comments":20,"hash":"DDEF9436D7F45C210A9455CB53E3BEE605733A20","peers":85,"seeds":76,"leechs":9,"size":1034944512,"votes":78,"verified":1},{"title":"Ubuntu 14.10 Desktop 32bit ISO","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-14-10-desktop-32bit-iso-t9749713.html","guid":"http:\/\/kickass.so\/ubuntu-14-10-desktop-32bit-iso-t9749713.html","pubDate":"Thursday 23 Oct 2014 17:38:41 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/1619ECC9373C3639F4EE3E261638F29B33A6CBD6.torrent?title=[kickass.so]ubuntu.14.10.desktop.32bit.iso","files":1,"comments":4,"hash":"1619ECC9373C3639F4EE3E261638F29B33A6CBD6","peers":74,"seeds":61,"leechs":13,"size":1186529280,"votes":9,"verified":1},{"title":"The Official Ubuntu Server Book 3rd Edition(2013)pdf","category":"Books","link":"http:\/\/kickass.so\/the-official-ubuntu-server-book-3rd-edition-2013-pdf-t9799029.html","guid":"http:\/\/kickass.so\/the-official-ubuntu-server-book-3rd-edition-2013-pdf-t9799029.html","pubDate":"Monday 3 Nov 2014 17:43:15 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/D297C0C2C18AFD613BD1E7C28B83FDD003E38C86.torrent?title=[kickass.so]the.official.ubuntu.server.book.3rd.edition.2013.pdf","files":1,"comments":0,"hash":"D297C0C2C18AFD613BD1E7C28B83FDD003E38C86","peers":50,"seeds":47,"leechs":3,"size":20259253,"votes":7,"verified":1},{"title":"ubuntu gnome 12 10 desktop i386 iso","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-gnome-12-10-desktop-i386-iso-t7068677.html","guid":"http:\/\/kickass.so\/ubuntu-gnome-12-10-desktop-i386-iso-t7068677.html","pubDate":"Friday 8 Feb 2013 02:06:40 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/568C51B2FAFFC8A0881E5DA5AD2B3941CC4593E1.torrent?title=[kickass.so]ubuntu.gnome.12.10.desktop.i386.iso","files":1,"comments":2,"hash":"568C51B2FAFFC8A0881E5DA5AD2B3941CC4593E1","peers":48,"seeds":45,"leechs":3,"size":850337792,"votes":3,"verified":0},{"title":"Ubuntu Linux Toolbox 1000+ Commands for Ubuntu and Debian Power Users by Christopher Negus","category":"Books","link":"http:\/\/kickass.so\/ubuntu-linux-toolbox-1000-commands-for-ubuntu-and-debian-power-users-by-christopher-negus-t8433778.html","guid":"http:\/\/kickass.so\/ubuntu-linux-toolbox-1000-commands-for-ubuntu-and-debian-power-users-by-christopher-negus-t8433778.html","pubDate":"Tuesday 24 Dec 2013 21:06:07 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/D2AA08AB08325A1D9B62EA9EB7F4585148101A00.torrent?title=[kickass.so]ubuntu.linux.toolbox.1000.commands.for.ubuntu.and.debian.power.users.by.christopher.negus","files":6,"comments":14,"hash":"D2AA08AB08325A1D9B62EA9EB7F4585148101A00","peers":45,"seeds":45,"leechs":0,"size":2611630,"votes":102,"verified":1},{"title":"Ubuntu 12.10 Desktop i386","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-12-10-desktop-i386-t6747821.html","guid":"http:\/\/kickass.so\/ubuntu-12-10-desktop-i386-t6747821.html","pubDate":"Thursday 18 Oct 2012 17:47:53 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/335990D615594B9BE409CCFEB95864E24EC702C7.torrent?title=[kickass.so]ubuntu.12.10.desktop.i386","files":1,"comments":135,"hash":"335990D615594B9BE409CCFEB95864E24EC702C7","peers":44,"seeds":43,"leechs":1,"size":789884928,"votes":425,"verified":1},{"title":"Ubuntu Kung Fu [black-14].pdf","category":"Books","link":"http:\/\/kickass.so\/ubuntu-kung-fu-black-14-pdf-t7348611.html","guid":"http:\/\/kickass.so\/ubuntu-kung-fu-black-14-pdf-t7348611.html","pubDate":"Thursday 25 Apr 2013 03:27:58 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/6A543A5F3389850283FCA2CAEBCFA8C691DF15A2.torrent?title=[kickass.so]ubuntu.kung.fu.black.14.pdf","files":1,"comments":1,"hash":"6A543A5F3389850283FCA2CAEBCFA8C691DF15A2","peers":40,"seeds":39,"leechs":1,"size":8926258,"votes":9,"verified":0},{"title":"Ubuntu Studio 12.04.4 dvd amd64","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-studio-12-04-4-dvd-amd64-t8823997.html","guid":"http:\/\/kickass.so\/ubuntu-studio-12-04-4-dvd-amd64-t8823997.html","pubDate":"Saturday 1 Mar 2014 00:41:15 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/8251B69EDB64AB36E81ED20E01F448408B8BF618.torrent?title=[kickass.so]ubuntu.studio.12.04.4.dvd.amd64","files":1,"comments":0,"hash":"8251B69EDB64AB36E81ED20E01F448408B8BF618","peers":43,"seeds":38,"leechs":5,"size":2113929216,"votes":1,"verified":0},{"title":"Ubuntu 12.10 server [64 bit]","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-12-10-server-64-bit-t6747840.html","guid":"http:\/\/kickass.so\/ubuntu-12-10-server-64-bit-t6747840.html","pubDate":"Thursday 18 Oct 2012 18:00:29 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/E07C4BEBFF79022C4C4C7E483188D10097D42CA7.torrent?title=[kickass.so]ubuntu.12.10.server.64.bit","files":1,"comments":7,"hash":"E07C4BEBFF79022C4C4C7E483188D10097D42CA7","peers":43,"seeds":36,"leechs":7,"size":722468864,"votes":24,"verified":0},{"title":"ubuntu GNOME 13.04 desktop i386 iso","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-gnome-13-04-desktop-i386-iso-t7386710.html","guid":"http:\/\/kickass.so\/ubuntu-gnome-13-04-desktop-i386-iso-t7386710.html","pubDate":"Sunday 5 May 2013 23:43:50 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/885EFB9B5C32DB79E08252ECC7616FEA9631BABD.torrent?title=[kickass.so]ubuntu.gnome.13.04.desktop.i386.iso","files":1,"comments":3,"hash":"885EFB9B5C32DB79E08252ECC7616FEA9631BABD","peers":33,"seeds":32,"leechs":1,"size":1005584384,"votes":7,"verified":0},{"title":"Ubuntu Linux Toolbox: 1000+ Commands for Ubuntu and Debian Power Users - MG","category":"Books","link":"http:\/\/kickass.so\/ubuntu-linux-toolbox-1000-commands-for-ubuntu-and-debian-power-users-mg-t8290152.html","guid":"http:\/\/kickass.so\/ubuntu-linux-toolbox-1000-commands-for-ubuntu-and-debian-power-users-mg-t8290152.html","pubDate":"Monday 2 Dec 2013 23:17:19 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/A687DB7CF06D44E89F5651EB561ECD0BA4F8192A.torrent?title=[kickass.so]ubuntu.linux.toolbox.1000.commands.for.ubuntu.and.debian.power.users.mg","files":1,"comments":14,"hash":"A687DB7CF06D44E89F5651EB561ECD0BA4F8192A","peers":33,"seeds":32,"leechs":1,"size":12152215,"votes":50,"verified":1},{"title":"The Official Ubuntu Book - 7th Edition.pdf Gooner","category":"Books","link":"http:\/\/kickass.so\/the-official-ubuntu-book-7th-edition-pdf-gooner-t8850822.html","guid":"http:\/\/kickass.so\/the-official-ubuntu-book-7th-edition-pdf-gooner-t8850822.html","pubDate":"Friday 7 Mar 2014 17:55:42 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/5191B146A56451F5677E4ED10F7B3B54C3692B4F.torrent?title=[kickass.so]the.official.ubuntu.book.7th.edition.pdf.gooner","files":1,"comments":7,"hash":"5191B146A56451F5677E4ED10F7B3B54C3692B4F","peers":32,"seeds":31,"leechs":1,"size":11159927,"votes":49,"verified":1},{"title":"Ubuntu Unleashed 2014 [Epub &amp; Mobi]~StormRG~","category":"Books","link":"http:\/\/kickass.so\/ubuntu-unleashed-2014-epub-mobi-stormrg-t8933808.html","guid":"http:\/\/kickass.so\/ubuntu-unleashed-2014-epub-mobi-stormrg-t8933808.html","pubDate":"Saturday 29 Mar 2014 03:12:18 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/CDD73DF3BB14C0E668936F66B41E5108FB9C89CB.torrent?title=[kickass.so]ubuntu.unleashed.2014.epub.mobi.stormrg","files":4,"comments":4,"hash":"CDD73DF3BB14C0E668936F66B41E5108FB9C89CB","peers":32,"seeds":31,"leechs":1,"size":40194417,"votes":37,"verified":1},{"title":"Instant Ubuntu, 2013 [PDF]~Storm~","category":"Books","link":"http:\/\/kickass.so\/instant-ubuntu-2013-pdf-storm-t8604402.html","guid":"http:\/\/kickass.so\/instant-ubuntu-2013-pdf-storm-t8604402.html","pubDate":"Sunday 19 Jan 2014 04:31:29 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/E297BEF8F0E343851BC7DD0FE134E554F5CC155D.torrent?title=[kickass.so]instant.ubuntu.2013.pdf.storm","files":3,"comments":4,"hash":"E297BEF8F0E343851BC7DD0FE134E554F5CC155D","peers":31,"seeds":30,"leechs":1,"size":2494247,"votes":18,"verified":1},{"title":"ubuntu 12.04.1 desktop (64 bit)","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-12-04-1-desktop-64-bit-t6606557.html","guid":"http:\/\/kickass.so\/ubuntu-12-04-1-desktop-64-bit-t6606557.html","pubDate":"Saturday 25 Aug 2012 16:29:16 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/C35D501D9A5A822DDDAD825FA94306BCFE522693.torrent?title=[kickass.so]ubuntu.12.04.1.desktop.64.bit","files":1,"comments":20,"hash":"C35D501D9A5A822DDDAD825FA94306BCFE522693","peers":30,"seeds":28,"leechs":2,"size":728018944,"votes":54,"verified":0},{"title":"Infiniteskills - Learning Ubuntu Linux","category":"Other","link":"http:\/\/kickass.so\/infiniteskills-learning-ubuntu-linux-t8825532.html","guid":"http:\/\/kickass.so\/infiniteskills-learning-ubuntu-linux-t8825532.html","pubDate":"Saturday 1 Mar 2014 10:48:08 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/7C7DCA2AC0D7D5C3526FB21FD52B260E6967719E.torrent?title=[kickass.so]infiniteskills.learning.ubuntu.linux","files":92,"comments":2,"hash":"7C7DCA2AC0D7D5C3526FB21FD52B260E6967719E","peers":36,"seeds":28,"leechs":8,"size":850069062,"votes":29,"verified":1},{"title":"ubuntu mate 14.04.1 iso (64-bit)","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-mate-14-04-1-iso-64-bit-t9841451.html","guid":"http:\/\/kickass.so\/ubuntu-mate-14-04-1-iso-64-bit-t9841451.html","pubDate":"Thursday 13 Nov 2014 13:40:38 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/C72E3A201AEC09E1174FDD70ED3FEFAE53299058.torrent?title=[kickass.so]ubuntu.mate.14.04.1.iso.64.bit","files":1,"comments":0,"hash":"C72E3A201AEC09E1174FDD70ED3FEFAE53299058","peers":30,"seeds":27,"leechs":3,"size":1180712960,"votes":1,"verified":0},{"title":"ubuntu 14 04 1 server amd64 iso","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-14-04-1-server-amd64-iso-t9376667.html","guid":"http:\/\/kickass.so\/ubuntu-14-04-1-server-amd64-iso-t9376667.html","pubDate":"Friday 25 Jul 2014 15:01:13 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/2D066C94480ADCF52BFD1185A75EB4DDC1777673.torrent?title=[kickass.so]ubuntu.14.04.1.server.amd64.iso","files":1,"comments":1,"hash":"2D066C94480ADCF52BFD1185A75EB4DDC1777673","peers":26,"seeds":25,"leechs":1,"size":599785472,"votes":12,"verified":1},{"title":"ubuntu 12 04 desktop i386 iso","category":"Applications","link":"http:\/\/kickass.so\/ubuntu-12-04-desktop-i386-iso-t6336815.html","guid":"http:\/\/kickass.so\/ubuntu-12-04-desktop-i386-iso-t6336815.html","pubDate":"Thursday 26 Apr 2012 11:21:06 +0000","torrentLink":"http:\/\/torcache.net\/torrent\/49FBD26322960D982DA855C54E36DF19AD3113B8.torrent?title=[kickass.so]ubuntu.12.04.desktop.i386.iso","files":1,"comments":10,"hash":"49FBD26322960D982DA855C54E36DF19AD3113B8","peers":28,"seeds":24,"leechs":4,"size":735358976,"votes":36,"verified":1}]}';
  }

});
